Goal: shell's name must be -su when a su fakes a login

Status wrt upstream: not reported yet

Index: shadow-4.0.18.1/src/su.c
===================================================================
--- shadow-4.0.18.1.orig/src/su.c	2006-09-17 12:18:08.884123984 +0200
+++ shadow-4.0.18.1/src/su.c	2006-09-17 12:18:09.492128818 +0200
@@ -916,7 +916,7 @@
 		 * Use the shell and create an argv
 		 * with the rest of the command line included.
 		 */
-		argv[-1] = shellstr;
+		argv[-1] = cp;
 #ifndef USE_PAM
 		(void) execve (shellstr, &argv[-1], environ);
 		err = errno;
