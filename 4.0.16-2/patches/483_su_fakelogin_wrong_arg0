Goal: shell's name must be -su when a su fakes a login

Status wrt upstream: not reported yet

Index: shadow-4.0.16/src/su.c
===================================================================
--- shadow-4.0.16.orig/src/su.c	2006-05-31 23:25:07.146329128 +0700
+++ shadow-4.0.16/src/su.c	2006-05-31 23:25:08.102183816 +0700
@@ -918,7 +918,7 @@
 		 * Use the shell and create an argv
 		 * with the rest of the command line included.
 		 */
-		argv[-1] = shellstr;
+		argv[-1] = cp;
 #ifndef USE_PAM
 		(void) execve (shellstr, &argv[-1], environ);
 		err = errno;
